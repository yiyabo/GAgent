# 🌐 Web UI 开发计划 - AI驱动智能任务编排系统

> **项目**: AI-Driven Task Orchestration System Web Interface  
> **分支**: `web_show`  
> **目标**: 构建类似Windsurf IDE风格的现代化Web界面

## 🎯 核心功能需求

### 1. **DAG可视化系统**
- 实时渲染任务层次结构（ROOT → COMPOSITE → ATOMIC）
- 交互式节点操作（点击、拖拽、右键菜单）
- 依赖关系可视化（requires、refers链接）
- 任务状态实时更新（pending、running、completed、failed）
- 层级折叠/展开功能

### 2. **智能对话聊天界面**
- 类似Windsurf IDE的对话体验
- 支持markdown渲染
- 代码高亮显示
- 历史对话记录
- 快捷操作按钮（重试、复制、导出）
- WebSocket实时通信

### 3. **可视化任务管理**
- 任务列表视图和卡片视图
- 任务详情编辑器
- 批量操作功能
- 搜索和过滤系统
- 任务模板管理

### 4. **结果展示系统**
- 执行结果的富文本展示
- 支持多种格式（Markdown、HTML、JSON）
- 文件下载和导出功能
- 结果对比和历史版本

## 🚀 补充功能建议

### 5. **实时状态监控**
- **WebSocket连接**: 实时推送任务状态变化
- **进度指示器**: 执行进度条和状态动画
- **系统仪表板**: CPU、内存、API调用统计
- **性能监控**: 响应时间、成功率指标

### 6. **评估系统可视化**
- **6维评估雷达图**: 相关性、完整性、准确性、清晰度、连贯性、科学严谨性
- **多模式对比**: LLM/多专家/对抗评估结果对比
- **质量趋势图**: 历史评估分数变化
- **改进建议展示**: 智能高亮和交互式建议

### 7. **上下文管理界面**
- **上下文来源可视化**: 依赖关系、计划兄弟、语义检索
- **预算使用展示**: 字符数限制和使用情况
- **上下文快照**: 历史上下文版本查看
- **语义相似度展示**: 检索结果的相似度分数

### 8. **智能搜索和过滤**
- **全文搜索**: 任务内容、输出结果全文检索
- **多维度筛选**: 状态、优先级、类型、时间范围
- **标签系统**: 自定义标签和智能标签
- **保存搜索**: 常用搜索条件保存

### 9. **工具调用可视化**
- **工具调用链路图**: 信息工具→生成→产出工具流程
- **API调用统计**: 调用次数、成本、成功率
- **工具性能分析**: 响应时间、错误率统计
- **工具配置管理**: 工具参数和配置界面

### 10. **协作和分享功能**
- **计划模板库**: 预设模板和自定义模板
- **结果导出**: PDF、Markdown、JSON、Excel格式
- **分享链接**: 生成只读分享链接
- **版本对比**: 计划和结果的历史版本对比

## 🏗️ 技术架构

### 前端技术栈
```typescript
Framework: React 18 + TypeScript + Vite
UI库: Ant Design / Material-UI
图形库: D3.js / vis.js (DAG可视化)
实时通信: Socket.io-client
代码编辑: Monaco Editor (VSCode体验)
状态管理: Zustand / Redux Toolkit
HTTP客户端: Axios + React Query
样式方案: Tailwind CSS + CSS Modules
```

### 后端API增强
```python
WebSocket支持:
- /ws/tasks (任务状态实时推送)
- /ws/chat (对话实时通信)
- /ws/system (系统监控数据)

流式响应:
- /stream/execute (流式执行结果)
- /stream/evaluate (流式评估过程)

文件管理:
- /api/files/upload (文件上传)
- /api/files/download (文件下载)
- /api/files/export (结果导出)

模板系统:
- /api/templates (模板CRUD)
- /api/templates/apply (应用模板)
```

## 🎨 UI/UX设计

### 整体布局
```
┌─────────────────────────────────────────────────────────────┐
│ Header (Logo, 导航, 用户信息, 系统状态, 设置)                │
├──────────────┬─────────────────────────────┬─────────────────┤
│ 左侧边栏     │ 主工作区                    │ 右侧聊天面板    │
│ ┌──────────┐ │ ┌─────────────────────────┐ │ ┌─────────────┐ │
│ │ 项目列表 │ │ │ DAG可视化区域           │ │ │ 对话历史    │ │
│ │ 任务管理 │ │ │ (任务节点、连线、状态)  │ │ │ 消息气泡    │ │
│ │ 模板库   │ │ └─────────────────────────┘ │ │ 代码块      │ │
│ │ 工具箱   │ │ ┌─────────────────────────┐ │ │ 快捷操作    │ │
│ │ 系统监控 │ │ │ 任务详情/结果展示区     │ │ └─────────────┘ │
│ └──────────┘ │ │ (编辑器、结果、评估)    │ │ ┌─────────────┐ │
│              │ └─────────────────────────┘ │ │ 输入框      │ │
│              │                             │ │ 发送按钮    │ │
│              │                             │ │ 附件上传    │ │
└──────────────┴─────────────────────────────┴─────────────────┘
```

### 关键交互设计
- **拖拽式编排**: 任务节点可拖拽调整位置和依赖关系
- **右键上下文菜单**: 快速操作（运行、暂停、编辑、删除、复制）
- **键盘快捷键**: 
  - `Ctrl+Enter`: 执行当前任务
  - `Ctrl+S`: 保存当前计划
  - `Ctrl+/`: 搜索
  - `Esc`: 取消当前操作
- **实时预览**: 编辑时实时显示效果
- **响应式设计**: 支持移动端和平板访问

## 📋 开发计划

### 🎯 第一阶段 - MVP (预计2-3周)
#### Week 1: 基础框架 ✅ **已完成**
- [x] 项目脚手架搭建 (React + TypeScript + Vite) ✅
- [x] 基础路由和布局组件 ✅
- [x] API客户端封装和真实API连接 ✅ *(已修复CORS和API响应格式问题)*
- [x] 基础UI组件库集成 (Ant Design) ✅

#### Week 2: 核心功能 🔄 **进行中**
- [ ] 简单的DAG可视化组件 (使用vis.js) ❌ **待完成**
- [x] 任务列表和基础管理功能 ✅ *(已有任务统计和查询)*
- [x] 基础聊天界面组件 ✅ **完全实现** *(支持真实LLM对话)*
- [ ] WebSocket连接和消息处理 ❌ **待完成**

#### Week 3: 功能集成 🔄 **部分完成**
- [ ] DAG与任务管理集成 ❌ **待完成**
- [x] 聊天与任务执行集成 ✅ **已实现** *(LLM可自动创建计划)*
- [x] 基础的状态管理 (Zustand) ✅
- [x] 任务和计划的结果展示 ✅

### 🚀 第二阶段 - 增强功能 (预计3-4周)
#### 实时功能
- [ ] WebSocket实时状态更新
- [ ] 流式执行结果展示
- [ ] 实时进度指示器

#### 评估系统
- [ ] 6维评估结果可视化
- [ ] 评估历史和趋势图
- [ ] 多模式评估对比

#### 高级交互
- [ ] 拖拽式任务编排
- [ ] 右键上下文菜单
- [ ] 键盘快捷键支持

### 🎨 第三阶段 - 用户体验 (预计2-3周)
#### 协作功能
- [ ] 模板系统
- [ ] 分享和导出功能
- [ ] 用户偏好设置

#### 性能优化
- [ ] 代码分割和懒加载
- [ ] 大量数据的虚拟化
- [ ] 缓存策略优化

#### 测试和部署
- [ ] 单元测试和集成测试
- [ ] E2E测试
- [ ] Docker化部署

## 🌟 独特价值点

### 基于项目特色的差异化优势
1. **智能任务分解可视化**
   - 展示ROOT→COMPOSITE→ATOMIC的智能分解过程
   - 复杂度评估和深度控制的可视化

2. **多模式评估展示**
   - 业界少有的LLM/多专家/对抗评估对比
   - 6维质量评分的直观展示

3. **工具增强流程可视化**
   - 信息工具→生成→产出工具的完整链路展示
   - 工具调用成本和效果分析

4. **上下文智能管理**
   - 复杂上下文组装策略的可视化
   - 语义检索和结构先验的展示

## 🎯 成功指标

### 用户体验指标
- 页面加载时间 < 2秒
- DAG渲染性能 < 1秒 (100个节点)
- 实时更新延迟 < 500ms
- 移动端适配率 > 90%

### 功能完整性
- 覆盖CLI功能的80%以上
- 支持所有任务类型和调度策略
- 完整的评估系统集成
- 工具增强功能100%覆盖

### 开发质量
- 单元测试覆盖率 > 80%
- TypeScript类型覆盖率 > 95%
- 代码审查通过率 100%
- 性能预算达标率 100%

---

## 📝 备注

- 本文档将随着开发进展持续更新
- 优先级可根据实际需求调整
- 技术选型可能根据团队技能和项目需求微调
- 设计规范需要与现有系统保持一致

**最后更新**: 2024年9月23日  
**文档版本**: v1.0  
**维护者**: AI-Driven Task Orchestration Team

---

---

## 📊 **当前进度总结** (2025年9月23日更新)

### ✅ **已完成的重大成就**
1. **🏗️ 基础架构完全就绪**
   - React 18 + TypeScript + Vite 项目脚手架 ✅
   - Ant Design UI组件库集成 ✅
   - Zustand状态管理 ✅
   - Axios + 真实API连接 ✅

2. **💬 智能聊天系统 - 完全实现**
   - 真实LLM API集成 (GLM/Perplexity) ✅
   - 自然语言对话支持 ✅
   - 对话历史管理 ✅
   - 智能意图识别和操作建议 ✅
   - 自动计划创建功能 ✅

3. **🔗 前后端完全打通**
   - CORS配置修复 ✅
   - API响应格式统一 ✅
   - 错误处理机制 ✅
   - 详细的调试日志 ✅

4. **📋 任务管理基础功能**
   - 任务统计API (513个任务) ✅
   - 计划创建API ✅
   - 状态查询功能 ✅

### 🔄 **下一步优先级 (按重要性排序)**

#### 🎯 **立即要做 (本周)**
1. **DAG可视化系统** ⭐⭐⭐
   - 使用vis.js实现任务树可视化
   - 显示ROOT → COMPOSITE → ATOMIC层级
   - 任务状态颜色标识
   - 基础交互功能 (点击查看详情)

2. **任务详情页面** ⭐⭐
   - 任务信息展示和编辑
   - 任务输出结果查看
   - 任务状态管理

#### 🚀 **短期目标 (下2周)**
3. **WebSocket实时更新** ⭐⭐
   - 任务状态实时推送
   - 执行进度实时显示
   - 系统监控数据

4. **任务执行控制** ⭐⭐
   - 启动/暂停/停止任务
   - 批量操作功能
   - 任务依赖管理

#### 🎨 **中期目标 (未来1个月)**
5. **评估系统可视化**
   - 6维评估雷达图
   - 质量趋势分析
   - 多模式评估对比

6. **文件管理系统**
   - 结果导出功能
   - 文件上传下载
   - 模板系统

### 📈 **进度指标**
- **整体完成度**: 约35% ✅
- **第一阶段MVP**: 70%完成 ✅
- **核心聊天功能**: 100%完成 🎉
- **API连接**: 100%修复 🎉

### 🎯 **技术债务清单**
- [ ] 移除未使用的imports (Task等)
- [ ] 完善TypeScript类型定义
- [ ] 添加单元测试
- [ ] 性能优化 (大量任务数据处理)

---

🚀 **恭喜！聊天系统已经完全实现，接下来重点攻克DAG可视化！**
