{"version":3,"file":"chat-a1845dd2.js","sources":["../../src/api/chat.ts"],"sourcesContent":["import { BaseApi } from './client';\nimport { Plan } from '../types/index';\n\ninterface ChatMessage {\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp?: string;\n}\n\ninterface ChatRequest {\n  message: string;\n  history?: ChatMessage[];\n  context?: Record<string, any>;\n  mode?: 'assistant' | 'planner' | 'analyzer';\n  session_id?: string; // ğŸ”’ ä¸“äº‹ä¸“åŠï¼šä¼šè¯éš”ç¦»å‚æ•°\n}\n\ninterface ChatResponse {\n  response: string;\n  suggestions?: string[];\n  actions?: Array<{\n    type: string;\n    label: string;\n    data: any;\n  }>;\n  metadata?: Record<string, any>;\n}\n\nexport class ChatApi extends BaseApi {\n  // å‘é€èŠå¤©æ¶ˆæ¯å¹¶è·å–AIå›å¤ - ä½¿ç”¨çœŸå®çš„LLM API\n  sendMessage = async (message: string, context?: {\n    task_id?: number;\n    plan_title?: string;\n    history?: ChatMessage[];\n    mode?: 'assistant' | 'planner' | 'analyzer';\n    workflow_id?: string;\n    session_id?: string;\n    metadata?: Record<string, any>;\n  }): Promise<ChatResponse> => {\n    const request: ChatRequest = {\n      message,\n      mode: context?.mode || 'assistant',\n      history: context?.history || [],\n      session_id: context?.session_id, // ğŸ”’ ä¸“äº‹ä¸“åŠï¼šå°†session_idæå‡ä¸ºé¡¶çº§å‚æ•°\n      context: {\n        task_id: context?.task_id,\n        plan_title: context?.plan_title,\n        workflow_id: context?.workflow_id,\n        ...context?.metadata, // ğŸ”’ åŒ…å«metadataä¿¡æ¯\n      }\n    };\n    \n    return this.post<ChatResponse>('/chat/message', request);\n  }\n\n  // è·å–èŠå¤©å»ºè®®\n  getSuggestions = async (): Promise<{\n    quick_actions: string[];\n    conversation_starters: string[];\n  }> => {\n    return this.get('/chat/suggestions');\n  }\n\n  // è·å–èŠå¤©æœåŠ¡çŠ¶æ€\n  getChatStatus = async (): Promise<{\n    status: string;\n    provider: string;\n    model: string;\n    mock_mode: boolean;\n    features: Record<string, boolean>;\n  }> => {\n    return this.get('/chat/status');\n  }\n\n  // è·å–ç³»ç»ŸçŠ¶æ€æ‘˜è¦  \n  getSystemStatus = async (): Promise<{\n    active_tasks: number;\n    pending_plans: number;\n    system_health: 'good' | 'warning' | 'critical';\n    recent_activity: string[];\n  }> => {\n    return this.get('/chat/system-status');\n  }\n\n  // æ‰§è¡ŒèŠå¤©å‘½ä»¤\n  executeCommand = async (command: string, params?: Record<string, any>): Promise<{\n    success: boolean;\n    result: any;\n    message: string;\n  }> => {\n    return this.post('/chat/command', {\n      command,\n      params,\n    });\n  }\n\n  // åˆ›å»ºè®¡åˆ’ä»èŠå¤©\n  createPlanFromChat = async (description: string): Promise<Plan> => {\n    return this.post('/chat/create-plan', {\n      description,\n    });\n  }\n\n  // è·å–ä»»åŠ¡å»ºè®®\n  getTaskSuggestions = async (goal: string): Promise<{\n    suggested_tasks: Array<{\n      name: string;\n      description: string;\n      estimated_time: string;\n      priority: 'high' | 'medium' | 'low';\n    }>;\n  }> => {\n    return this.post('/chat/task-suggestions', {\n      goal,\n    });\n  }\n\n  // åˆ†æç”¨æˆ·è¾“å…¥æ„å›¾\n  analyzeIntent = async (message: string): Promise<{\n    intent: 'create_plan' | 'view_status' | 'execute_task' | 'general_chat' | 'help';\n    confidence: number;\n    entities: Record<string, any>;\n    suggestions: string[];\n  }> => {\n    return this.post('/chat/analyze-intent', {\n      message,\n    });\n  }\n}\n\nexport const chatApi = new ChatApi();\n"],"names":["ChatApi","BaseApi","__publicField","message","context","request","command","params","description","goal","chatApi"],"mappings":"qSA4BO,MAAMA,UAAgBC,CAAQ,CAA9B,kCAELC,EAAA,mBAAc,MAAOC,EAAiBC,IAQT,CAC3B,MAAMC,EAAuB,CAC3B,QAAAF,EACA,MAAMC,GAAA,YAAAA,EAAS,OAAQ,YACvB,SAASA,GAAA,YAAAA,EAAS,UAAW,CAAC,EAC9B,WAAYA,GAAA,YAAAA,EAAS,WACrB,QAAS,CACP,QAASA,GAAA,YAAAA,EAAS,QAClB,WAAYA,GAAA,YAAAA,EAAS,WACrB,YAAaA,GAAA,YAAAA,EAAS,YACtB,GAAGA,GAAA,YAAAA,EAAS,QACd,CAAA,EAGK,OAAA,KAAK,KAAmB,gBAAiBC,CAAO,CAAA,GAIzDH,EAAA,sBAAiB,SAIR,KAAK,IAAI,mBAAmB,GAIrCA,EAAA,qBAAgB,SAOP,KAAK,IAAI,cAAc,GAIhCA,EAAA,uBAAkB,SAMT,KAAK,IAAI,qBAAqB,GAIvCA,EAAA,sBAAiB,MAAOI,EAAiBC,IAKhC,KAAK,KAAK,gBAAiB,CAChC,QAAAD,EACA,OAAAC,CAAA,CACD,GAIHL,EAAA,0BAAqB,MAAOM,GACnB,KAAK,KAAK,oBAAqB,CACpC,YAAAA,CAAA,CACD,GAIHN,EAAA,0BAAqB,MAAOO,GAQnB,KAAK,KAAK,yBAA0B,CACzC,KAAAA,CAAA,CACD,GAIHP,EAAA,qBAAgB,MAAOC,GAMd,KAAK,KAAK,uBAAwB,CACvC,QAAAA,CAAA,CACD,GAEL,CAEa,MAAAO,EAAU,IAAIV"}